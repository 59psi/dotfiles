#!/bin/sh

[ -n "$1" ] || {
  echo "usage: rails-new <app path>"
  exit 1
}

set -e

trap 'rm -rf "$1"' ERR INT TERM

mkdir -p "$1"
cd "$1"
git init

cat >Gemfile <<EOS
source "https://rubygems.org"
gem "rails"
EOS

bundle --path .bundle
bundle exec rails new . -f
