#!/usr/bin/env bash

BACKUP_PATH=/Volumes/GPG\ Backup
cd ~/.dotfiles

if [[ -d "$BACKUP_PATH" ]]; then
    tar -cvjf "temp.tar.bz2" gnupg/ &&
    mv "temp.tar.bz2" "${BACKUP_PATH}/gnupg/gnupg_$(date +%m-%d-%y).tar.bz2"

    tar -cvjf "temp.tar.bz2" gpg/ &&
    mv "temp.tar.bz2" "${BACKUP_PATH}/gpg/gpg_$(date +%m-%d-%y).tar.bz2"

    tar -cvjf "temp.tar.bz2" .passwords.gpg && 
    mv "temp.tar.bz2" "${BACKUP_PATH}/passwords/passwords_$(date +%m-%d-%y).tar.bz2"

    tar -cvjf "temp.tar.bz2" ssh/ &&
    mv "temp.tar.bz2" "${BACKUP_PATH}/ssh/ssh_$(date +%m-%d-%y).tar.bz2"
    
    tar -cvjf "temp.tar.bz2" tarsnap/ &&
    mv "temp.tar.bz2" "${BACKUP_PATH}/tarsnap/tarsnap_$(date +%m-%d-%y).tar.bz2"
else 
    echo -e "\nBackup volume ${BACKUP_PATH}/ is missing!"
    echo -e "Please attach the volume and try again.\n"
fi
