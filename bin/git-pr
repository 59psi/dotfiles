#!/usr/bin/env bash -e
# git-pr: apply a GitHub pull request patch file to a new branch

[ -z "$1" ] && echo "No URL supplied" && exit 1

git checkout -b pr/$(echo $1 | grep -Eo "[0-9]+") upstream/master --no-track
curl -# "$(echo $1 | grep -Eo ".+[0-9]+").patch" | git am -s
