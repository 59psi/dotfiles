#!/bin/sh

if [ -z "$1" ]; then
  echo "usage: ${0##/*/} [-Ogpw] <file>"
  exit 1
fi

while getopts ":Ogpw" opt
do
	case $opt in
		O) opts="-O3 ";;
		g) opts="${opts}-ggdb ";;
		p) opts="${opts}-pg ";;
		w) opts="${opts}-Wall -Wextra -std=c99 ";;
	esac
done

shift $((OPTIND-1))
src=`basename $1 .c`
shift
echo  "  CC  ${opts% } -o ${src} ${src}.c $@"
/usr/bin/cc ${opts} -o ${src} ${src}.c $@
